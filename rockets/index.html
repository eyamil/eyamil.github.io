<html>
    <head>
        <title>Rockets</title>
        <meta name = "viewport" content = "user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
        <link rel='stylesheet' href='../index.css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Advent+Pro' rel='stylesheet' type='text/css'>
        <script type='text/javascript' src='../index.js'></script>
        <script type='text/javascript' src='../vectors.js'></script>
        <script type='text/javascript' src='../paper-full.js'></script>
        <style type='text/css'>
            #c {
                height:100%;
                width:100%;
            }
            #bannertext {
                color:black;
            }
        </style>
    </head>
    <body>
        <div id='banner'>
            <div id='banneroverlay'></div>
            <div id='bannertext'>
                <h1>Interesting title here.</h1>
                <input id='slider'>
                <h5>My website, intended to turn into my senior project.</h5>
            </div>
            <div id='bannerbkg' style='width:100%;'>
                <canvas id='c' resize='true' />
                <script type='text/javascript'>
                    var dt = 0.01; 
                        // The time step, in seconds. Used to approximate in integration. Smaller is better, but also may cause performance issues.
                    var x = [(window.innerWidth/2), (window.innerHeight/2)];
                    var v = [200,0];
                    var absV = vmag(v);
                        // Set up initial position and velocity as vectors.
                    var slider = document.getElementById('slider');
                        slider.type = 'range';
                        slider.class = 'slider';
                        slider.max = 0.125*Math.pow(vmag(v),2);
                        slider.min = -1*slider.max;
                        slider.class = 'center';
                        function Amag() {
                            return(slider.value);
                        }
                      // Set up the slider for acceleration.
                    var O = document.getElementById('marker');
                        // Set up a marker element to see where this thing goes.
                    function a() {
                        var rot90 = [[0,1],[-1,0]]; // 90 degree clockwise rotation matrix.
                        if (vmag(v) != 0) {
                            var vmat = [norm(v)]; // Unit vector in the direction of the velocity.
                        }
                        else {
                            var vmat = [[0,0]]
                        }
                        return(vscale(Amag(),(mmult(vmat,rot90)[0]))); // Rotate normalized V by 90 deg (because centripetal acc is always perpendicular), then scale.
                    }
                        // Function that returns centripetal acceleration vector.
                    function updatev() {
                        // Just scaling by dt is slightly inaccurate. As you repeat it over time, you'll see the magnitude of v start to increase, so instead, we need some additional scaling to preserve |v|. First we normalize the vsum to preserve its direction, then we scale up to absV, the magnitude of the velocity at time t=0.
                        v = vscale(absV, norm(vsum(v,vscale(dt,a()))));
                        return(v);
                    }
                        // Function that updates velocity. v_{t} = v_{t-1} + (a)*(Δt)
                    function updatex() {
                        x = vsum(x,vscale(dt,v),vscale((0.5*Math.pow(dt,2)),a()));
                        return(x);
                    }
                        // Function that updates velocity. x_{t} = x_{t-1} + (v_{t-1})*(Δt) + (1/2)*(a_t)*(Δt)^2 <-- that will always return 2, use Math.pow() instead of ^.
                    function update() {
                        /* We can eventually get rid of this. It'll allow us to de-link the animation clock from the integration clock.
                        O.style.left = mod(x[0] + window.innerWidth/2, window.innerWidth);
                        O.style.top = mod(x[1] + window.innerHeight/2, window.innerHeight);
                        */
                        // Calculation steps:
                        updatex();
                        updatev();
                        // Drawing steps:
                        drawship();
                        drawradius(); // Commented out temporarily for debugging. I'm going to draw the spaceship first.
                        paper.view.draw();
                    }
                    var integrator = setInterval(update,(1000*dt));
                    
                    // We need a souped up angle function that doesn't jump in order to get the spaceship to draw properly.
                    function vangle(v1,v2) {
                        var n1 = norm(v1);
                        var n2 = norm(v2);
                        var rawcosangle = Math.acos(dotprod(n1,n2));
                        var D = det([n1,n2]);
                        if (D < 0) {
                            return(-1*rawcosangle)
                        }
                        else {
                            return(rawcosangle);
                        }
                    }
                    
                    function mod(n, m) { // An improved mod function, lets us avoid negative numbers in the result
                        return(((n % m) + m) % m);
                    }
                    
                    function convertto() { // Meant to convert from integration units to pixels, including the shift to the center of the window.
                        // Eventually there will be stuff here
                    }
                    
                    /* Paper/Drawing stuff starts here: */
                    var canvas = document.getElementById('c');
                        paper.setup(canvas);
                        
                    var Rpath = new paper.Path();
                        Rpath.strokeColor = 'grey';
                        // Start a radius path in gray
                    function drawradius() {
                        Rpath.clear(); // Clear the earlier radius path
                        var acc = a(); // Create a storage variable
                        if (vmag(acc) !== 0) { // As long as the acceleration isn't a zero vector, we can proceed
                            var absR = (Math.pow(absV,2))/(vmag(acc)); // Find the magnitude of the radius and store it to absV
                            var r = vscale((absR),norm(acc)); // Take the acceleration vector and 
                            var start = new paper.Point(x);
                            Rpath.moveTo(start);
                            Rpath.lineTo(vsum(r,x));
                            return(r);
                        }
                    }
                
                    var Spath = new paper.Path();
                        Spath.strokeColor = 'blue';
                        // Draw the Ship in blue
                    function drawship() {
                        Spath.clear();
                        var Urwing = [-10, -20];
                        var Ulwing = [10, -20];
                            // Set up the ship's triangle shape in unrotated space.
                        var dir = vangle(v, [0,1]); // Find the angle between a unit vector to the right and the velocity
                        var rotMat = [[Math.cos(dir), -Math.sin(dir)], [Math.sin(dir), Math.cos(dir)]]; // Set up a rotation matrix to rotate the shape we had before.
                        var UTRwing = mmult([Urwing], rotMat)[0]; // Rotate the Urwing vector to get the coordinates of the untranslated right wing
                        var UTLwing = mmult([Ulwing], rotMat)[0]; // ^ for the left wing. The tip doesn't get rotated, oh well.
                        var tip = new paper.Point(x);
                            Spath.moveTo(tip);
                            Spath.lineTo(vsum(x,UTRwing));
                            Spath.lineTo(vsum(x,UTLwing));
                            Spath.lineTo(tip);
                        }
                    </script>
                </div>
        </div>
        <div id='content'>
            <article id='post'>
                <h1>Lorem Ipsum</h1>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero. Sed dignissim lacinia nunc. 
                    </br>
                    </br>
                    Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh. Quisque volutpat condimentum velit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. 
                    </br>
                    </br>
                    Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. Ut fringilla. Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet. Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo eu magna luctus suscipit. Sed lectus. 
                    </br>
                    </br>
                    Integer euismod lacus luctus magna. Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue elementum. Morbi in ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim. Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. 
                    </br>
                    </br>
                    Nulla facilisi. Integer lacinia sollicitudin massa. Cras metus. Sed aliquet risus a tortor. Integer id quam. Morbi mi. Quisque nisl felis, venenatis tristique, dignissim in, ultrices sit amet, augue. Proin sodales libero eget ante. Nulla quam. Aenean laoreet. Vestibulum nisi lectus, commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan porttitor, cursus quis, aliquet eget, justo. Sed pretium blandit orci. Ut eu diam at pede suscipit sodales. 
                    </br>
                    </br>
                    Aenean lectus elit, fermentum non, convallis id, sagittis at, neque. Nullam mauris orci, aliquet et, iaculis et, viverra vitae, ligula. Nulla ut felis in purus aliquam imperdiet. Maecenas aliquet mollis lectus. Vivamus consectetuer risus et tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. 
                    </br>
                    </br>
                    Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero. Sed dignissim lacinia nunc. Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. 
                    </br>
                    </br>
                    Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh. Quisque volutpat condimentum velit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. Ut fringilla. Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet. 
                    </br>
                    </br>
                    Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus magna. Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue elementum. 
                    </br>
                    </br>
                    Morbi in ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim. Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. Nulla facilisi. Integer lacinia sollicitudin massa. Cras metus. Sed aliquet risus a tortor. Integer id quam. Morbi mi. 
                    </br>
                    </br>
                    Quisque nisl felis, venenatis tristique, dignissim in, ultrices sit amet, augue. Proin sodales libero eget ante. Nulla quam. Aenean laoreet. Vestibulum nisi lectus, commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan porttitor, cursus quis, aliquet eget, justo. Sed pretium blandit orci. Ut eu diam at pede suscipit sodales. Aenean lectus elit, fermentum non, convallis id, sagittis at, neque. Nullam mauris orci, aliquet et, iaculis et, viverra vitae, ligula. Nulla ut felis in purus aliquam imperdiet. Maecenas aliquet mollis lectus. Vivamus consectetuer risus et tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                    </br>
                    </br>
                    Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. 
                </p>
            </article>
        </div>
    </body>
</html>
